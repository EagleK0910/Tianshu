<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>開發者最高權限控制台</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { background-color: #0f111a; color: #e2e8f0; }
        .dev-card { background-color: #1a1c2e; border: 1px solid #2d314d; }
        .detail-row { border-bottom: 1px solid #2d314d; padding: 12px 0; }
    </style>
</head>
<body class="p-8">
    <div class="max-w-7xl mx-auto">
        <header class="flex justify-between items-end mb-10">
            <div>
                <h1 class="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400">DEV CONTROL PANEL</h1>
                <p class="text-gray-500 font-mono mt-2">系統狀態：運作正常 | 當前節點：Cluster-01</p>
            </div>
            <div class="text-right">
                <p class="text-xs font-bold text-gray-500 uppercase tracking-widest">總服務規模</p>
                <p class="text-2xl font-black text-white">{{ total_stats.server_count }} 伺服器 / {{ total_stats.total_users }} 使用者</p>
            </div>
        </header>

        <div class="space-y-6">
            {% for g in guilds %}
            <div class="dev-card rounded-3xl overflow-hidden shadow-2xl">
                <div class="p-6 flex justify-between items-center bg-[#242745]">
                    <div class="flex items-center space-x-4">
                        <div class="w-12 h-12 bg-indigo-600 rounded-2xl flex items-center justify-center font-black text-xl">
                            {{ g.name[0] }}
                        </div>
                        <div>
                            <h3 class="text-xl font-black">{{ g.name }}</h3>
                            <p class="text-xs text-gray-400 font-mono">{{ g.id }}</p>
                        </div>
                    </div>
                    <div class="flex space-x-8">
                        <div class="text-center">
                            <p class="text-[10px] text-gray-400 uppercase">人類 / 機器人</p>
                            <p class="font-bold text-indigo-400">{{ g.human_count }} / {{ g.bot_count }}</p>
                        </div>
                        <button onclick="toggleDetail('{{ g.id }}')" class="bg-gray-800 hover:bg-gray-700 p-3 rounded-xl transition">
                            <i class="fa-solid fa-magnifying-glass-plus"></i>
                        </button>
                    </div>
                </div>

                <div id="detail-{{ g.id }}" class="hidden p-8 border-t border-gray-700/50">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                        <div>
                            <h4 class="text-indigo-400 text-xs font-black uppercase mb-4 tracking-widest">Server Metadata</h4>
                            <div class="detail-row flex justify-between">
                                <span class="text-gray-400">伺服器擁有者</span>
                                <span class="text-white font-medium">{{ g.owner }}</span>
                            </div>
                            <div class="detail-row flex justify-between">
                                <span class="text-gray-400">創建日期</span>
                                <span class="text-white font-medium">{{ g.created_at }}</span>
                            </div>
                            <div class="mt-6">
                                <h4 class="text-rose-400 text-xs font-black uppercase mb-4 tracking-widest">Administrators</h4>
                                <div class="flex flex-wrap gap-2">
                                    {% for admin in g.admins %}
                                    <span class="bg-rose-500/10 text-rose-400 text-xs px-3 py-1 rounded-lg border border-rose-500/20">{{ admin }}</span>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>

                        <div>
                            <h4 class="text-emerald-400 text-xs font-black uppercase mb-4 tracking-widest">Channels ({{ g.channels.text|length + g.channels.voice|length }})</h4>
                            <div class="max-h-60 overflow-y-auto pr-4 custom-scrollbar">
                                <p class="text-[10px] text-gray-500 mb-2">文字頻道</p>
                                <div class="grid grid-cols-2 gap-2 mb-4">
                                    {% for ch in g.channels.text %}
                                    <div class="text-xs text-gray-300 bg-gray-800/50 p-2 rounded-md"># {{ ch }}</div>
                                    {% endfor %}
                                </div>
                                <p class="text-[10px] text-gray-500 mb-2">語音頻道</p>
                                <div class="grid grid-cols-2 gap-2">
                                    {% for ch in g.channels.voice %}
                                    <div class="text-xs text-gray-300 bg-gray-800/50 p-2 rounded-md"><i class="fa-solid fa-volume-high mr-1 text-[10px]"></i> {{ ch }}</div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <script>
        function toggleDetail(id) {
            const el = document.getElementById(`detail-${id}`);
            el.classList.toggle('hidden');
        }
    </script>
</body>
</html>