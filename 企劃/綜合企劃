管理員機器人

壹. 兩大核心功能 (目前設計兩項後續可能會有更多)

    1. 開創Discord模板功能 :

        - 成員可以上傳自己的模板到機器人，方便新的伺服主可以快速的建立一個新的伺服器。

    2. 伺服器管理功能 :

        - 管理員可以使用警告以及嘉獎功能來管理伺服器成員的行為。



貳. 頁面及操作設計 :

    一. 斜線指令 (Slash Commands)

    功能列表 :

        1. 給予成員警告

        2. 給予成員嘉獎

        3. 上傳Discord模板

        4. 刪除Discord模板

        5. 查看指定成員的警告和嘉獎紀錄

        6. 查看所有成員的警告和嘉獎紀錄

    二. 網頁介面

    功能列表 :

        1. 管理員登入頁面(使用Discord帳號登入)

        - 使用OAuth2進行Discord帳號登入驗證

        - 登入後顯示該成員所有有管理員權限的伺服器列表，讓管理員選擇要管理哪個伺服器

        2. 模板管理頁面 (上傳、刪除、查看模板)

        - 上傳模板 : 管理員可以上傳自己的Discord模板，並提供模板名稱和描述

        - 刪除模板 : 管理員可以刪除自己上傳的模板

        - 查看模板 : 管理員可以查看自己上傳的模板列表，包含模板名稱、描述和上傳日期

        - 所有模板頁面 : 管理員可以查看所有上傳的模板，包含模板名稱、描述、上傳者和上傳日期

        3. 成員管理頁面 (查看成員警告和嘉獎紀錄)

        - 查看成員警告和嘉獎紀錄 : 管理員可以查看指定成員的警告和嘉獎紀錄

        - 查看所有成員警告和嘉獎紀錄 : 管理員可以查看所有成員的警告和嘉獎紀錄

        - 搜尋功能 : 管理員可以使用搜尋功能來快速找到特定成員的紀錄

        - 登陸警告及嘉獎紀錄 : 管理員可以登陸新的警告或嘉獎紀錄，包含成員名稱、類型（警告或嘉獎）、原因和日期

參. 實際應用

    一. Discord模板功能 :

        1. 指令功能設計 :

        ; - 指令名稱 : /template

        ;     + 參數 :

        ;     - Link (必填) : 模板連結 【機器人會檢查連結是否有效且為Discord模板連結(https://discord.new/)為開頭】

        ;     - template_name (必填) : 模板名稱

        ;     - description (選填) : 模板描述

        ; - 指令名稱 : /My_template

        ;     + 功能 : 查看自己上傳的模板列表並且可以修改或是刪除模板

        ;     會使用嵌入(embed)的方式來顯示模板列表，包含模板名稱、描述和上傳日期，並提供下拉選單讓使用者選擇要修改或刪除的模板

        ;     - 修改模板 : 選擇後可以修改模板名稱和描述。提供模板名稱、描述的按鈕可以讓使用者修改模板資訊，並在提供一個上一步的按鈕讓使用者可以返回模板列表

        ;     - 刪除模板 : 選擇後會彈出確認視窗，確認後刪除模板

        2. 網頁介面設計 :

            - 模板管理頁面 : 使用者可以管理自己的Discord模板

            + 上傳模板 : 使用者可以上傳自己的Discord模板，並提供模板名稱和描述

            + 刪除模板 : 使用者可以刪除自己上傳的模板

            + 查看模板 : 使用者可以查看自己上傳的模板列表，包含模板名稱、描述和上傳日期

            - 所有模板頁面 : 使用者可以查看所有上傳的模板，包含模板名稱、描述、上傳者和上傳日期(這個頁面會顯示在首頁，讓所有使用者都可以看到所有上傳的模板，並且可以點擊模板名稱來查看模板詳細資訊)



    二. 伺服器管理功能 :

        1. 指令功能設計 :

            ; - 指令名稱 : /warn (只有限定的身分組可以使用這個指令，預設是伺服器擁有者)

            ;     + 參數 :

            ;     - member (必填) : 被警告的成員

            ;     - number (必填) : 警告次數

            ;     - reason (選填) : 警告原因

            ; - 指令名稱 : /reward (只有限定的身分組可以使用這個指令，預設是伺服器擁有者)

            ;     + 參數 :

            ;     - member (必填) : 被嘉獎的成員

            ;     - number (必填) : 警告次數

            ;     - reason (選填) : 嘉獎原因

            ; - 指令名稱 : /record

            ;     + 參數 :

            ;     - member (選填) : 指定成員來查看警告和嘉獎紀錄，如果不填則顯示自己的紀錄

            ;     - 指令名稱 : /all_record (只有限定的身分組可以使用這個指令，預設是伺服器擁有者)

            ;     + 功能 : 查看所有成員的警告和嘉獎紀錄

            ; - 指令名稱 : /log_channel

            ;     + 功能 : 設定警告和嘉獎紀錄的頻道，當有新的警告或嘉獎紀錄時會在這個頻道中發送通知。

            ;     + 參數 :

            ;     - channel (必填) : 警告和嘉獎紀錄的頻道

            ; - 指令名稱 : /offset

            ;     + 功能 : 設定嘉獎是否可以和警告抵消，當成員有嘉獎紀錄時可以抵消掉相同數量的警告紀錄

            ;     + 參數 :

            ;     - offset (必填) : 是否啟用抵消功能 (true/false)

            ;     + 邏輯 :

            ;     offset邏輯為邏輯抵銷，會保留所有的警告以及嘉獎紀錄，但在顯示紀錄時會先抵銷掉相同數量的警告紀錄，並且在顯示紀錄時會顯示抵銷後的警告和嘉獎數量

            ; - 指令名稱 : /admin

            ;     + 功能 : 伺服器擁有者專用指令，可以指定其他成員或是身分組來使用限定指令(/warn、/reward、/all_record)，可以指定的成員或是身分組可以使用這些指令來管理伺服器

            ;     + 參數 :

            ;     - member_or_role (必填) : 被指定的成員或身分組

            ;     + 互動 :

            ;     - 輸入完成後會傳送選擇視窗，讓使用者選擇要給予或是刪除權限並提供取消按鈕，讓使用者可以取消操作

        2. 網頁介面設計 :

        需要同步到Discord伺服器，不能有延遲的更新

            - 管理員登入頁面(使用Discord帳號登入) :

            + 使用OAuth2進行Discord帳號登入驗證

            + 登入後顯示該成員所有有管理員權限的伺服器列表，讓管理員選擇要管理哪個伺服器

            - 成員管理頁面 (查看成員警告和嘉獎紀錄) :

            + 查看成員警告和嘉獎紀錄 : 管理員以及擁有伺服器權限可以查看

            + 登陸成員警告及嘉獎 : 管理員以及擁有伺服器權限可以給予成員警告或嘉獎。並將紀錄登陸到資料庫中，包含成員名稱、類型（警告或嘉獎）、原因和日期，也要同步到Discord伺服器中，讓成員可以在Discord中看到自己的警告和嘉獎紀錄

            + 搜尋功能 : 管理員可以使用搜尋功能來快速找到特定成員的紀錄

            + 查看所有成員警告和嘉獎紀錄 : 管理員可以查看所有成員的警告和嘉獎紀錄，並且可以使用搜尋功能來快速找到特定成員的紀錄

            + 警告及嘉獎懲處或獎勵功能 : 管理員可以設定當成員的警告或嘉獎達到一定數量時，會自動執行懲處或獎勵的動作，例如當成員的警告達到3次時，自動將成員踢出伺服器；當成員的嘉獎達到5次時，自動給予成員一個特定的身分組。管理員可以在網頁介面中設定這些懲處或獎勵的條件和動作，並且可以隨時修改或是刪除這些設定

            + /admin指令的網頁介面版本 : 管理員可以在網頁介面中指定其他成員或是身分組來使用限定指令(/warn、/reward、/all_record)，可以指定的成員或是身分組可以使用這些指令來管理伺服器。管理員可以在網頁介面中選擇要給予或是刪除權限，並提供取消按鈕，讓使用者可以取消操作

        三. 綜合指令設計 :

            1. 指令名稱 : /dashboard

            + 功能 : 提供一個綜合的指令，讓管理員可以快速地進入網頁介面來管理伺服器

            + 參數 : 無

            + 互動 : 輸入指令後會回傳一個包含網頁連結的訊息，管理員可以點擊連結來進入網頁介面

        2. 指令名稱 : /help

            + 功能 : 提供一個綜合的指令，讓使用者可以快速地查看所有指令的使用說明

            + 參數 : 無

            + 互動 : 輸入指令後會回傳一個分類的下拉式選單，選單內容包含指令、使用說明

            - 指令 : 回傳指令分類的下拉式選單，選單內容包含一般指令、管理員指令、模板指令等，使用者可以選擇要查看哪一類的指令

            - 使用說明 : 回傳下拉是選單，選單內容包含模板使用方式以及警告和嘉獎的使用方式，使用者可以選擇要查看哪一類的使用說明

        ; 3. 指令名稱 : /about

        ;     + 功能 : 提供一個綜合的指令，讓使用者可以快速地查看機器人的相關資訊

        ;     + 參數 : 無

        ;     + 互動 : 輸入指令後會回傳一個包含機器人的相關資訊的訊息

        ;     - 邀請連結 : 回傳機器人的邀請連結，讓使用者可以點擊連結來邀請機器人加入自己的伺服器

        ;     - 版本資訊 : 回傳機器人的版本資訊，包含目前版本號、更新日期

        ;     - 開發者資訊 : 回傳機器人的開發者資訊，包含開發者名稱、聯繫方式和機器人群組連結

        ;     - 延遲資訊 : 回傳機器人的延遲資訊，包含目前的延遲時間

        4. 指令名稱 : /feedback

            + 功能 : 提供一個綜合的指令，讓使用者可以快速地提供對機器人的反饋和建議

            + 參數 : 無

            + 互動 : 輸入指令後會回傳一個包含反饋表單的microsoft表單連結，使用者可以點擊連結來進入反饋表單，並且可以在表單中填寫自己的反饋和建議。

        ; 5. 指令名稱 : /server_info (開發者限定指令。不顯示於help指令中)

        ;     + 功能 : 顯示所有機器人所在的伺服器的資訊，包含伺服器名稱、伺服器ID、成員數量、機器人加入日期等

        ;     + 參數 : 無

        ;     + 互動 : 每一頁顯示5個伺服器的資訊，並提供下一頁和上一頁的按鈕來瀏覽所有伺服器的資訊，並且有一個下拉選單讓使用者可以選擇要查看哪一個伺服器的詳細資訊，選擇後會回傳該伺服器的詳細資訊，包含伺服器名稱、伺服器ID、成員數量、機器人加入日期、伺服器擁有者名稱和ID以及伺服器邀請連結。

        ; 6. 指令名稱 : /message (開發者限定指令。不顯示於help指令中)

        ;     + 功能 : 讓開發者可以快速地像機器人所在的伺服器發送消息，訊息發送於log_channel指令所設定的頻道中

        ;     + 參數 : 無

        ;     + 互動 : 輸入指令後機器人會詢問要發送的消息內容，使用者輸入完成後會回傳一個確認視窗，讓使用者確認要發送的消息內容，並提供取消按鈕，讓使用者可以取消操作。

        ;     機器人傳送的格式為嵌入(embed)的方式，包含消息內容和發送日期。

        ; 7. 指令名稱 : /manager (開發者限定指令。不顯示於help指令中)

        ;     + 功能 : 讓開發者可以快速指定其他成員是否為開發者指定的成員，指定的成員可以共同審核使用者上傳的Discord模板

        ;     + 參數 : 使用者ID

        ;     + 互動 : 回傳使用者資訊並提供指定和刪除的按鈕，讓開發者可以指定或是刪除指定其他成員為開發者指定的成員，並提供取消按鈕，讓使用者可以取消操作。
        ; 8. 指令名稱 : /all_template (開發者限定指令。不顯示於help指令中)
        
        ;     + 功能 : 讓開發者可以查看所有上傳的Discord模板，並且可以刪除不適當的模板

        ;     + 參數 : 無

        ;     + 互動 : 每一頁顯示5個模板的資訊，並提供下一頁和上一頁的按鈕來瀏覽所有模板的資訊，並且有一個下拉選單讓使用者可以選擇要查看哪一個模板的詳細資訊，選擇後會回傳該模板的詳細資訊，包含模板名稱、描述、上傳者名稱和ID、上傳日期以及刪除按鈕，讓開發者可以刪除不適當的模板，并提供取消按鈕，讓使用者可以取消操作。



肆. 實際應用SOP

    一. 伺服器模板

        1. 使用者上傳模板 :

        - 使用者使用/template指令來上傳自己的Discord模板，並提供模板連結、模板名稱和描述

        - 機器人會檢查連結是否有效且為Discord模板連結(https://discord.new/)為開頭，如果不符合條件則回傳錯誤訊息

        - 如果符合條件則將模板資訊傳送給開發者所指定的成員私訊進行審核

        - 審核通過後將模板資訊存入資料庫中，並且在所有模板頁面中顯示該模板的資訊

        - 審核不通過則回傳審核不通過的訊息給使用者，並且不會在所有模板頁面中顯示該模板的資訊

        + 審核流程 :

        - 開發者收到一個包含模板資訊的私訊，並且自己處理以及下放給指定成員來審核

        - 點擊自己處理按鈕則由開發者自己審核，點擊下放按鈕指定成員會同時收到一個審核通知的訊息，並且有收件及拒絕兩個按鈕，讓指定成員可以選擇要審核還是拒絕審核該模板

        - 當有一位成員點擊收件按鈕後，其他成員的收件按鈕會被鎖定，無法再進行收件。

        - 點擊通過按鈕則審核通過，點擊不通過按鈕則審核不通過

        - 若點擊不通過按鈕則會彈出一個輸入框讓審核者輸入不通過的原因，並且將不通過的原因回傳給使用者

        - 一位成員可以審核多個模板，但同一個模板只能被審核一次，審核結果會即時回傳給使用者

        - 上傳成功後回傳成功訊息給使用者，並且在所有模板頁面中顯示該模板的資訊

        - 上傳失敗回傳訊息給開發者原因，例如程式錯誤或是資料庫錯誤等

    2. 使用者管理自己的模板 :

    - 使用者使用/My_template指令來查看自己上傳的模板列表，只會顯示模板名稱，使用下拉式選單讓使用者選擇要修改或是刪除的模板

    - 選擇後會回傳該模板的詳細資訊，包含模板名稱、描述和上傳日期，並提供修改和刪除的按鈕以及上一步的按鈕讓使用者可以返回模板列表

    - 修改模板 : 選擇後可以修改模板名稱和描述。提供模板名稱、描述的按鈕可以讓使用者修改模板資訊，並在提供一個上一步的按鈕讓使用者可以返回模板列表

    - 刪除模板 : 選擇後會彈出確認視窗，確認後刪除模板

    3. 開發者及指定成員管理模板 :

    - 開發者及指定成員可以使用資料庫管理工具來查看所有上傳的模板資訊，並且可以刪除不適當的模板

    - 開發者及指定成員可以在資料庫中修改模板資訊，例如修改模板名稱、描述等

    二. 伺服器管理

        1. 使用者警告和嘉獎 :

        - 管理員使用/warn指令來給予成員警告，並提供被警告的成員、警告次數和警告原因等參數

        - 管理員使用/reward指令來給予成員嘉獎，並提供被嘉獎的成員、嘉獎次數和嘉獎原因等參數

        - 當管理員給予成員警告或嘉獎後，會將紀錄登陸到資料庫中，包含成員名稱、類型（警告或嘉獎）、原因和日期，也要同步到Discord伺服器中，讓成員可以在Discord中看到自己的警告和嘉獎紀錄

        - 所有成員可以使用/record指令來查看指定成員的警告和嘉獎紀錄

        - 管理員可以使用/all_record指令來查看所有成員的警告和嘉獎紀錄

        - 管理員可以使用/log_channel指令來設定警告和嘉獎紀錄的頻道，當有新的警告或嘉獎紀錄時會在這個頻道中發送通知

        - 管理員可以使用/offset指令來設定嘉獎是否可以和警告抵消，當成員有嘉獎紀錄時可以抵消掉相同數量的警告紀錄

        + 警告和嘉獎懲處或獎勵功能 : 管理員可以設定當成員的警告或嘉獎達到一定數量時，會自動執行懲處或獎勵的動作(網頁限定功能)



伍. 開發流程

    一. 編寫「伺服器模板」

        - 包含指令功能設計以及互動設計

    二. 編寫「伺服器管理」

        - 包含指令功能設計以及互動設計

    三. 編寫網頁介面

        - 包含模板管理頁面以及成員管理頁面

    四. 編寫綜合指令

        - 包含/dashboard、/help、/about、/feedback等指令的功能設計以及互動設計



陸. 備註及說明
    一. 開發者Discord ID : 882991365351420005
    二. 網頁端與 Discord 的「無延遲更新」
    方式： Discord API 有 Rate Limit (速率限制)。如果網頁端短時間內大量更新（例如一鍵清除 100 人的警告），機器人發送通知到 log_channel 時可能會排隊。在網頁前端可以加上「處理中...」的動畫，等後端 API 確定 Discord 訊息發送成功後再回傳完成。
    三. 開發語言 : Python
    四. 資料庫: PostgreSQL
    五. 前端: React 搭配 Tailwind CSS
    六. 即時通訊: WebSocket (用於網頁端與 Bot 端的即時數據交換)
    七. 部署平台: Zeabur
    八. 版本控制: GitHub
    九. 機器人核心檔案: bot.py (包含指令處理、Discord API 交互等核心邏輯)
    十. 開發隱密資料 : config.json (包含 Discord Bot Token、資料庫連接字串等敏感資訊，需加入 .gitignore 避免上傳到 GitHub)